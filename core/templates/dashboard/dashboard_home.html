{% extends 'base.html' %}
{% load static %}
{% load i18n %}


{% block help %}
  {% include 'solo/about.html' %}
{% endblock %}


{% block head %}
  <script>
    $(document).ready(function() {
    	
      $(function(){
          initialize_chat();
          //$("#two-tab").click(function() {
              $.ajax({
      	        url : "{% url 'dashboard_ajax_2d' %}",
      	        type: 'GET',
      	        success: function(data){
      	            $('#two').html(data);
      	        }
          //    })
          });
      })
      $(function(){
      	$("#three-tab").click(function() {
      		$.ajax({
      			url : "{% url 'dashboard_ajax_3d' %}",
      			type: 'GET',
      			success: function(data){
      				$('#three').html(data);
      			}
      		})
      	});
      }) 
    }); 
  </script>
{% endblock %}


{% block content %}
{% if request.user.open_feedback %}
  <div class="row mb-5 py-3">
    <div class="col-12">
      {% with markets=request.user.markets %}
        {% include 'feedback/solo/feedback_to_give_list.html' %}
      {% endwith %}
    </div>
  </div>
{% endif %}

{% if not request.user.locations or not request.user.markets or not request.user.pushs or not request.user.pulls %}
  <div class="container">
    <div class="row">
      <div class="col-auto">{% trans 'recommended'|title %} {% trans 'actions' %}:</div>
    </div>

    <div class="row">
      {% if not request.user.locations %}
        <div class="col-auto">
          <a class="btn btn-warning" href="{% url 'location_create' %}"><i class="fas fa-plus"></i> {% trans 'location' %}</a>
        </div>
      {% endif %}
  
      {% if not request.user.pushs %}
        <div class="col-auto">
          <a class="btn btn-warning" href="{% url 'listing_create' 'push' %}"><i class="fas fa-plus"></i> {% trans 'push' %}</a>
        </div>
      {% endif %}
  
      {% if not request.user.pulls %}
        <div class="col-auto">
          <a class="btn btn-warning" href="{% url 'listing_create' 'pull' %}"><i class="fas fa-plus"></i> {% trans 'pull' %}</a>
        </div>
      {% endif %}

      {% if not request.user.markets %}
        <div class="col-auto">
          <a class="btn btn-warning" href="{% url 'market_create' %}"><i class="fas fa-plus"></i> {% trans 'market' %}</a>
        </div>
      {% endif %}

    </div>
  </div>
{% endif %}


{% if request.user.is_authenticated %}
  {% include 'user/solo/user_objects.html' %}
{% endif %}

<hr class="my-5">

<div class="container">
  <ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
        aria-selected="true">{% trans 'home'|title %}</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="two-tab" data-toggle="tab" href="#two" role="tab" aria-controls="two"
        aria-selected="false" onclick="">{% trans 'calculate'|title %} {% trans 'deals' %}</a>
    </li>
  </ul>
  <div class="tab-content py-3 border-left border-right border-bottom" id="myTabContent">
    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
      <div class="container-fluid mt-5">

        {% with chat=lobby %}{% include 'chat/solo/lobby.html' %}{% endwith %}  
  
      </div>
    </div>
    <div class="tab-pane fade" id="two" role="tabpanel" aria-labelledby="two-tab">
      <div class="container">
        <div class="row">
          <div class="col w-100 d-flex justify-content-center" style="height: 100px;">
            <div class="spinner-border my-auto" role="status">
              <span class="sr-only">{% trans 'load'|title %} {% trans 'data' %} </span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="three" role="tabpanel" aria-labelledby="three-tab">
      <div class="container">
        <div class="row">
          <div class="col w-100 d-flex justify-content-center" style="height: 100px;">
            <div class="spinner-border my-auto" role="status">
              <span class="sr-only">{% trans 'load'|title %} {% trans 'data' %} ...</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
