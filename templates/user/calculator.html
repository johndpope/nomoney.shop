{% extends 'base.html' %}
{% load static %}

{% block content %}
<h1>Tauschmöglichkeiten</h1>
<h2>Dreiseitig:</h2>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Benutzer</th>
      <th scope="col">Tauscht</th>
      <th scope="col"></th>
      <th scope="col">Gegen</th>
      <th scope="col">Mit</th>
    </tr>
  </thead>
  <tbody>
{% with calc=request.user.calculator %}
{% for deal in calc.level3.deals %}

    <tr>
      <td>{% with user=request.user %}{% include 'user/user_popover.html' %}{% endwith %}</td>
      <td>{% for listing in deal.pushs %}{% include 'listing/listing_badge_link.html' %}{% endfor %}</td>
      <td><img src={% static 'logo.png' %} height="30px"></td>
      <td>{% for listing in deal.pulls %}{% include 'listing/listing_badge_link.html' %}{% endfor %}</td>
      <td>{% with user=deal.user %}{% include 'user/user_popover.html' %}{% endwith %}</td>
    </tr>
{% endfor %}
{% endwith %}
  </tbody>
</table>


<h2>Zweiseitig:</h2>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Benutzer</th>
      <th scope="col">Tauscht</th>
      <th scope="col"></th>
      <th scope="col">Gegen</th>
      <th scope="col">Mit</th>
    </tr>
  </thead>
  <tbody>
{% with calc=request.user.calculator %}
{% for deal in calc.level2 %}
    <tr>
      <td>{% with user=request.user %}{% include 'user/user_popover.html' %}{% endwith %}</td>
      <td>{% for listing in deal.pushs %}{% include 'listing/listing_badge_link.html' %}{% endfor %}</td>
      <td><img src={% static 'logo.png' %} height="30px"></td>
      <td>{% for listing in deal.pulls %}{% include 'listing/listing_badge_link.html' %}{% endfor %}</td>
      <td>{% with user=deal.user %}{% include 'user/user_popover.html' %}{% endwith %}</td>
    </tr>
{% endfor %}
{% endwith %}
  </tbody>
</table>

<!-- 
<h2>Indirekte Tauschmöglichkeiten:</h2>
<h2>Weitere Tauschmöglichkeiten</h2>
 -->
<h2>Einseitig:</h2>
<table class="table">
  <thead>
    <tr>
      <th scope="col">Benutzer</th>
      <th scope="col">Tauscht</th>
      <th scope="col"></th>
      <th scope="col">Gegen</th>
      <th scope="col">Mit</th>
    </tr>
  </thead>
  <tbody>
{% with calc=request.user.calculator %}
{% for deal in calc.level1 %}
    <tr>
      <td>{% with user=request.user %}{% include 'user/user_popover.html' %}{% endwith %}</td>
      <td>{% for listing in deal.pushs %}{% include 'listing/listing_badge_link.html' %}{% endfor %}</td>
      <td><img src={% static 'logo.png' %} height="30px"></td>
      <td>{% for listing in deal.pulls %}{% include 'listing/listing_badge_link.html' %}{% endfor %}</td>
      <td>{% with user=deal.user %}{% include 'user/user_popover.html' %}{% endwith %}</td>
    </tr>
{% endfor %}
{% endwith %}
  </tbody>
</table>
{% for deal in calc.level1 %}
  {% include 'user/user_popover.html' %}
  {{ deal.user }}{{deal.level}}
  {{ deal.pushs }}
  {{ deal.pulls }}
{% endfor %}
{% endblock %}
